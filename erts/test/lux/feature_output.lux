[doc Testing of output when features have been enabled]

[include features.luxinc]

[invoke setup]

[newshell erl]
    !export OTP_TEST_FEATURES=true
    ?SH-PROMPT:
    -undefined function
    !erl -pa $outdir
    ?$ERLPROMPT

    # Output should should know about the new reserved words during runtime

    [invoke same-members "erl_features:enable_feature(maybe_expr)" "[cond_expr,maps,maybe_expr]"]

    [invoke same-members "erl_features:enable_feature(ifn_expr)" "[cond_expr,maps,maybe_expr,ifn_expr]"]

    # !feature_directive_maybe_ifn:foo().
    !['ifn','maybe','else','if'].
    ??['ifn','maybe','else','if']
    ?$ERLPROMPT

    !erl_features:enable_feature(ifn_expr).
    ?[ifn_expr,maybe_expr]
    ?$ERLPROMPT

[cleanup]
    !rm -fr $outdir
